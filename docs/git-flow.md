# Инструкция по работе с репозиторием

### Начало работы
1. Сделать fork основного репозитория себе в аккаунт GitHub;
2. Клонировать свой fork к себе на компьютер.

### Процесс
1. Перед созданием новой ветки и перед pull request'ом необходимо обновить свой локальный репозиторий(а так же fork);
	- В начале добавить основной репозиторий в remote(назовем основной репозиторий upstream)
	```bash
git remote add upstream https://github.com/tesler/cspt-moodle.git
	```
	- Затем убрать возможность сделать push в upstream
	```bash
git remote set-url --push upstream no_push
	```
	- Соответственно перед созданием новой ветки или перед pull request'ом нужно обновить локальный и master, и master на fork'e
	```bash
git pull --rebase upstream master
git push
	```
	- Если обновление невозможно из-за конфликтов, то необходимо "спрятать" свои изменения и только затем сделать pull
	```bash
git stash
git pull --rebase upstream master
git push
git stash pop
	```
	- Если по каким-то причинам выполнить `git push` невозможно, то выполнить эту команду с флагом force
	```bash
git push -f
	```

2. Название ветки должно соответствовать issue в GitHub. Для этого ее необходимо называть `GH-<номер issue>`(например `GH-5`);
3. После выполнения issue, сделать commit в созданной ветке. В начале сообщения коммита нужно указать номер ветки `GH-<номер issue> <текст коммита>`(Например `GH-5 Инструкция по работе с репозиторием`);
4. Затем сделать push этой ветки в origin (для новой ветки скорее всего потребуется выполнить `git push --set-upstream origin GH-5`);
5. В аккаунте GitHub сделать pull request в основной репозиторий;
6. Если появилась необходимость исправить уже существующий pull request, желательно добавить их в уже существующий коммит(то есть выполнить команду `git commit` с флагом `amend`). А затем выполнить `git push` с флагом `force`
```bash
git commit --amend
git push -f
```
